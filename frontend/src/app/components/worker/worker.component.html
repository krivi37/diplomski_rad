<div class="mt-1" *ngIf="!searchSubjectsVisible"><button class="btn btn-primary" (click)="toggleSearchSubjects()">Pretraži predmete</button></div>
<div class="mt-1" *ngIf="searchSubjectsVisible">
    <button class="btn btn-primary" (click)="toggleSearchSubjects()">Sakrij pretragu predmeta</button>
    <button class="btn btn-info ml-1" (click)="getAllSubjects()">Dohvati sve predmete</button>
</div>
<div class="mt-1" *ngIf="searchSubjectsVisible">
    <form (submit)="searchSubjects()">
        <div class="form-group">
            <label>Identifikacioni broj</label>
            <input type="text" [(ngModel)]="id_number" name="id_number" class="form-control">
        </div>
        <div class="form-group">
            <label>Datum</label>
            <input type="datetime-local" [(ngModel)]="submission_date" name="submission_date" class="form-control">
            <button type = "button" class="btn btn-info mt-1" (click)="clearSubjectDate()">Resetuj datum</button>
        </div>
        <div class="form-group">
            <label>Naslov</label>
            <input type="text" [(ngModel)]="title" name="title" class="form-control">
        </div>
        <div class="form-group">
            <label>Opis</label>
            <input type="text" [(ngModel)]="description" name="description" class="form-control">
        </div>
        <div class="form-group">
            <label>Ključne riječi (koristiti dvostruke navodnike za riječi sa razmakom)</label>
            <input type="text" [(ngModel)]="keywords" name="keywords" class="form-control">
        </div>
        <div class="form-group">
            <label>Kategorija</label>
            <input type="text" [(ngModel)]="category" name="category" class="form-control">
        </div>
        <div class="form-group">
            <label>Podnosilac</label>
            <input type="text" [(ngModel)]="submitter" name="submitter" class="form-control">
        </div>
        <div class="form-group">
            <label>Zaduzeni zaposleni (korisnička imena)</label>
            <input type="text" [(ngModel)]="employees" name="employees" class="form-control">
        </div>
        <div class="form-group">
            <label>Odsjek</label>
            <input type="text" [(ngModel)]="department" name="department" class="form-control">
        </div>
        <div class="form-group">
            <label>Sadrži dokumente (koristiti dvostruke navodnike za nazive dokumenata koji imaju razmak u imenu)</label>
            <input type="text" [(ngModel)]="document_names" name="document_names" class="form-control">
        </div>
        <input type="submit" class="btn btn-primary" value="Pretrazi">
    </form>
</div>
<div class="mt-1" *ngIf="(subjects?.length > 0) && !resultSubjectsVisible"><button class="btn btn-primary" (click)="toggleResultSubjectsVisible()">Prikaži rezultate pretrage predmeta</button></div>
<div class="mt-1" *ngIf="resultSubjectsVisible"><button class="btn btn-primary" (click)="toggleResultSubjectsVisible()">Sakrij rezultate pretrage predmeta</button></div>
<div class="mt-1" *ngIf="subjects?.length > 0 && resultSubjectsVisible">
    <table class="table">
        <thead>
            <th scope="col">ID broj</th>
            <th scope="col">Datum</th>
            <th scope="col">Naslov</th>
            <th scope="col">Opis</th>
            <th scope="col">Ključne riječi</th>
            <th scope="col">Kategorija</th>
            <th scope="col">Podnosilac</th>
            <th scope="col">Zaduženi zaposleni</th>
            <th scope="col">Odsjek</th>
            <th scope="col">Dokumenti</th>
            <th scope="col"></th>
        </thead>
        <tbody>
            <tr *ngFor="let stavka of subjects">
                <td>{{stavka.id_number}}</td>
                <td>{{stavka.submission_date}}</td>
                <td>{{stavka.title}}</td>
                <td>{{stavka.description}}</td>
                <td>{{stavka.keywords}}</td>
                <td>{{stavka.category}}</td>
                <td>{{stavka.submitter}}</td>
                <td>{{stavka.employees}}</td>
                <td>{{stavka.department}}</td>
                <td>{{stavka.documents}}</td>
                <div>
                    <button class="btn btn-secondary" (click)="deleteSubject(stavka)">Obriši</button>
                </div>
            </tr>
        </tbody>
    </table>
</div>

<div class="mt-1" *ngIf="!searchDocumentsVisible"><button class="btn btn-secondary" (click)="toggleSearchDocumentsVisible()">Pretraži dokumente</button></div>
<div class="mt-1" *ngIf="searchDocumentsVisible">
    <button class="btn btn-secondary" (click)="toggleSearchDocumentsVisible()">Sakrij pretragu dokumenata</button>
    <button class="btn btn-info ml-1" (click)="getAllDocuments()">Dohvati sve dokumente</button>
</div>
<div class="mt-1" *ngIf="searchDocumentsVisible">
    <form (submit)="searchDocuments()">
        <div class="form-group">
            <label>Datum</label>
            <input type="datetime-local" [(ngModel)]="document_submission_date" name="document_submission_date" class="form-control">
            <button type = "button" class="btn btn-info mt-1" (click)="clearDocumentDate()">Resetuj datum</button>
        </div>
        <div class="form-group">
            <label>Naslov</label>
            <input type="text" [(ngModel)]="document_title" name="document_title" class="form-control">
        </div>
        <div class="form-group">
            <label>Opis</label>
            <input type="text" [(ngModel)]="document_description" name="document_description" class="form-control">
        </div>
        <div class="form-group">
            <label>Tagovi (koristiti dvostruke navodnike za tagove koji imaju razmak u imenu)</label>
            <input type="text" [(ngModel)]="document_tags" name="document_tags" class="form-control">
        </div>
        <div class="form-group">
            <label>Predmeti kojima pripada (koristiti dvostruke navodnike za imena predmeta koji imaju razmak u imenu)</label>
            <input type="text" [(ngModel)]="document_subjects" name="document_subjects" class="form-control">
        </div>
        <input type="submit" class="btn btn-primary" value="Pretrazi">
    </form>
</div>
<div class="mt-1" *ngIf="(documents?.length > 0) && (!resultDocumentsVisible)"><button class="btn btn-secondary" (click)="toggleResultDocumentsVisible()">Prikaži rezultate pretrage dokumenata</button></div>
<div class="mt-1" *ngIf="resultDocumentsVisible"><button class="btn btn-secondary" (click)="toggleResultDocumentsVisible()">Sakrij rezultate pretrage dokumenata</button></div>
<div class="form-check mt-1" *ngIf="(documents?.length > 0) && resultDocumentsVisible">
    <input type="checkbox" [(ngModel)]="showArchived" name="showArchived" class="form-check-input" id="showArchived">
    <label class="form-check-label" for="showArchived">Prikaži i arhivirane</label>
</div>
<div class="mt-1" *ngIf="documents?.length > 0 && resultDocumentsVisible">
    <table class="table">
        <thead>
            <th scope="col">Datum</th>
            <th scope="col">Naslov</th>
            <th scope="col">Opis</th>
            <th scope="col">Tagovi</th>
            <th scope="col">Predmeti kojima pripada</th>
            <th scope="col">Arhiviran</th>
            <th scope="col"></th>
        </thead>
        <tbody>
            <tr *ngFor="let stavka of documents">
                <td *ngIf = "(stavka.archived && showArchived) || (!stavka.archived)">{{stavka.submission_date}}</td>
                <td *ngIf = "(stavka.archived && showArchived) || (!stavka.archived)">{{stavka.title}}</td>
                <td *ngIf = "(stavka.archived && showArchived) || (!stavka.archived)">{{stavka.description}}</td>
                <td *ngIf = "(stavka.archived && showArchived) || (!stavka.archived)">{{stavka.tags}}</td>
                <td *ngIf = "(stavka.archived && showArchived) || (!stavka.archived)">{{stavka.subjects}}</td>
                <td *ngIf = "(stavka.archived && showArchived) || (!stavka.archived)">
                <div *ngIf = "stavka.archived && showArchived"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"/>
                  </svg></div></td>
                <div>
                    <button class="btn btn-secondary" (click)="deleteDocument(stavka)">Obriši</button>
                </div>
            </tr>
        </tbody>
    </table>
</div>